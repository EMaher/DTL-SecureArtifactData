{
  "$schema": "https://raw.githubusercontent.com/Azure/azure-devtestlab/master/schemas/2016-11-28/dtlArtifacts.json",
  "title": "Create User Mounted Drive",
  "description": "Mounts drive from Azure Files",
  "publisher": "Elizabeth Maher - MSFT",
  "tags": [
    "Windows"
  ],
  "iconUri": "",
  "targetOsType": "Windows",
  "parameters": {
    "KeyVaultName": {
      "type": "string",
      "displayName": "KeyVault Name",
      "description": "Name of keyvault that holds connection information for file share.",
      "allowEmpty": false
    },
    "ShareName": {
      "type": "string",
      "displayName": "FileShare Name",
      "description": "Name of file share.",
      "allowEmpty": false
    },
    "UserName": {
      "type": "string",
      "displayName": "User Name.",
      "description": "Name of developer account on virtual machine.",
      "allowEmpty": false
    },
    "Password": {
      "type": "securestring",
      "displayName": "Password",
      "description": "Password for developer account on the virtual machine.",
      "allowEmpty": false
    }
  },
  "runCommand": {
    "commandToExecute": "[concat('powershell.exe -ExecutionPolicy bypass \"& ./artifact.ps1', ' -KeyVaultName \"', parameters('KeyVaultName'), ' -ShareName \"', parameters('ShareName'), ' -UserName \"', parameters('UserName'), ' -Password \"', parameters('Password'), '\"')]"
  }
}
